# optimizedMemosDB
optimized images for Memos

最近在使用碎片化的记录工具 Memos，https://github.com/usememos/memos 
由于Memos把图片保存在sqlite数据库中，我习惯直接从手机上传图片，当原图非常大且使用时间久了图片非常多的时候，数据库会变得很大。
这个脚本使用tinify的API对数据库中的图片进行压缩

使用这个脚本需要python环境,在compressImage.py脚本中替换自己的YOUR_API_KEY 和 memos库路径
```python
tinify.key = "YOUR_API_KEY"
dbname='/data/memos/memos_prod.db'
```

YOUR_API_KEY 在 https://tinypng.com/developers 申请即可，每月免费压缩500张图片。

安装tinify的python库
```sh
pip install --upgrade tinify
```

执行：
```sh
python ./compressImage.py

```
执行效果：
```sh
# python ./compressImage.py
EA722A1C-0EDA-4FFE-B3E5-A845EFA5EE21_CMP.jpg 505479 196277
1E3422D5-F3DC-4D98-B561-FEC079141E0A_CMP.jpg 88050 32996
DC631A8F-16A0-4C9D-91A0-677F73EFCBD4_CMP.jpg 380299 136024
694C0568-D27A-42BB-BBEE-3D89C1DB4CFC_CMP.jpg 408561 147992
F8E644B4-4E7E-430A-B4E2-901EC212FC39_CMP.jpg 397782 142598
7C27327F-4F61-445E-821A-6CFB10E10A72_CMP.jpg 320900 113964
2022-11-11 14.05.40_CMP.png 155197 44161
2022-11-11 14.08.50_CMP.png 61140 12307
2022-11-11 21.47.13_CMP.png 146329 50407
AFFEE719-5CA0-4FF1-9424-5A0EA700A8C1_CMP.jpg 158529 76159
5C7FFE8C-6962-4275-AD67-4DF8B1C87009_CMP.jpg 642098 221237
9BD827D1-FCCC-4967-94B3-D6892F8DC4AE_CMP.jpeg 125528 69657
2022-11-13 13.57.23_CMP.png 39948 7524
2022-11-13 13.50.21_CMP.png 31649 7758
00FFF293-F1AC-42B7-AAF7-947C9653BF5C_CMP.jpg 488080 170125
9C0C6E41-55C3-441F-A7EF-0F424547D579_CMP.jpg 1804528 520330
2EDD26C2-8376-4670-8A62-41D211C8E6D8_CMP.jpg 705694 220765
1847C93B-6857-4E40-9EFE-DC08085A7FAF_CMP.jpg 259417 73226
C5B99305-C242-4D28-91D8-46EB13C230C9_CMP.jpeg 212831 90439
893112A0-6FE7-485B-A48C-90B64A909FFD_CMP.jpeg 153961 58006
70F6E97D-31D1-4CFF-8081-1FE650157CB9_CMP.jpeg 120368 42875
B5CC056B-2746-4C90-9782-C393A473D13B_CMP.jpeg 88252 42553
```
